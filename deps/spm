#!/usr/bin/env php
<?php

$cmd = $argv[1] ?? null;
$package = $argv[2] ?? null;

switch ($cmd) {
    case 'install':
        $url = $argv[3] ?? null;
        $cmd = "php getdeps.php --install $package";
        if ($url) {
            $cmd .= " " . escapeshellarg($url);
        }
        passthru($cmd);
        break;
    case 'update':
        if ($package) {
            passthru("php getdeps.php --update $package");
        } else {
            passthru("php getdeps.php --update");
        }
        break;
    case 'uninstall':
    case 'remove':
        if ($package) {
            passthru("php getdeps.php --uninstall $package");
        } else {
            echo "Please specify a package to uninstall.\n";
        }
        break;
    case 'phar':
        passthru("php getdeps.php --phar");
        break;
    default:
        echo "spm [install|update|uninstall [package]|phar]\n";
        break;
}
